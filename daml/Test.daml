module Test where

import Daml.Script

import Main

data Participants = Participants 
  with
    marketMaker: Party
    gambler: Party

setup : Script (Participants)
setup = script do
-- user_setup_begin
  gambler <- allocatePartyWithHint "Gambler" (PartyIdHint "Gambler")
  marketMaker <- allocatePartyWithHint "MarketMaker" (PartyIdHint "MarketMaker")
  gamblerId <- validateUserId "gambler"
  marketMakerId <- validateUserId "marketMaker"
  createUser (User gamblerId (Some gambler)) [CanActAs gambler]
  createUser (User marketMakerId (Some marketMaker)) [CanActAs marketMaker]
-- user_setup_end

  submitMulti [gambler, marketMaker] [] do createCmd MarketMakerGamblerRelationship with ..

  let participants = Participants with ..

  return(participants)